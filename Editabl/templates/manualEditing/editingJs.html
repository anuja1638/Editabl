<script>
$(function() {

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    /*Image editing */
    var img = new Image();
    img.crossOrigin = '';
    img.src = 'https://media.istockphoto.com/photos/picturesque-morning-in-plitvice-national-park-colorful-spring-scene-picture-id1093110112?k=20&m=1093110112&s=612x612&w=0&h=3OhKOpvzOSJgwThQmGhshfOnZTvMExZX2R91jNNStBY=';

    img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0, img.width, img.height);

        //Hide elements of right panel of Editing Page
        document.getElementById('adjust_panel').style.display = "none";
        document.getElementById('effect_panel').style.display = "none";
    }

    //Slider Functions for Editing
    $('input[type=range]').change(setFilters_slider);

    function setFilters_slider() {
        let hue = parseInt($('#hue-slider').val());
        let cntrst = parseInt($('#contrast-slider').val());
        let vibr = parseInt($('#vibrance-slider').val());
        let sep = parseInt($('#sepia-slider').val());
        let bright = parseInt($('#brightness-slider').val());
        let sat = parseInt($('#saturation-slider').val());
        let exp = parseInt($('#exposure-slider').val());
        let noise = parseInt($('#noise-slider').val())
        let sharp = parseInt($('#sharpen-slider').val());
        let clip = parseInt($('#clip-slider').val());
        let stack = parseFloat($('#stackBlur-slider').val());
        let gamma = parseFloat($('#gamma-slider').val());
        Caman('#canvas', img, function() {
            this.revert(false);
            this.hue(hue).contrast(cntrst).vibrance(vibr).sepia(sep).brightness(bright).saturation(sat).exposure(exp).noise(noise).sharpen(sharp).clip(clip).stackBlur(stack).gamma(gamma).render();
        });

    }

    $('input[type=number]').change(setFilters_number);

    function setFilters_number() {
        let cntrst = parseInt($('#contrast').val());
        let vibr = parseInt($('#vibrance').val());
        let sep = parseInt($('#sepia').val());
        let bright = parseInt($('#brightness').val());
        let hue = parseInt($('#hue').val());
        let sat = parseInt($('#saturation').val());
        let exp = parseInt($('#exposure').val());
        let noise = parseInt($('#noise').val())
        let sharp = parseInt($('#sharpen').val());
        let clip = parseInt($('#clip').val());
        let stack = parseFloat($('#stackBlur').val());
        let gamma = parseFloat($('#gamma').val());
        Caman('#canvas', img, function() {
            this.revert(false);
            this.hue(hue).contrast(cntrst).vibrance(vibr).sepia(sep).brightness(bright).saturation(sat).exposure(exp).noise(noise).sharpen(sharp).clip(clip).stackBlur(stack).gamma(gamma).render();
        });
    }

    //Effects for Editing
    var $clarity = $('#claritybtn');
    var $orangepeel = $('#orangepeelbtn');
    var $sunrise = $('#sunrisebtn');
    var $crossprocess = $('#crossprocessbtn');
    var $hdr = $('#hdrbtn');
    var $vintage = $('#vintagebtn');
    var $lomo = $('#lomobtn');
    var $love = $('#lovebtn');
    var $grungy = $('#grungybtn');
    var $jarques = $('#jarquesbtn');
    var $glowingsun = $('#glowingsunbtn');
    var $hazydays = $('#hazydaysbtn');
    var $hermajesty = $('#hermajestybtn');
    var $reset = $('#resetbtn');

    $reset.on('click', function(e) {
        reset(e);
    });

    function reset(e) {
        $('input[type=range]').val(0);
        $('input[type=number]').val(0);
        $('#gamma').val(1);
        $('#gamma-slider').val(1);
        Caman('#canvas', function() {
            this.revert(false);
            this.render();
        });
    }
    /*In Built Filters */
    $clarity.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.clarity().render();
        });
    });

    $orangepeel.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.orangePeel().render();
        });
    });

    $sunrise.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.sunrise().render();
        });
    });

    $crossprocess.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.crossProcess().render();
        });
    });

    $hdr.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.contrast(10);
            this.contrast(10);
            this.jarques();
            this.render();
        });
    });

    $vintage.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.vintage().render();
        });
    });

    $lomo.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.lomo().render();
        });
    });

    $love.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.love().render();
        });
    });

    $grungy.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.grungy().render();
        });
    });

    $jarques.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.jarques().render();
        });
    });

    $glowingsun.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.glowingSun().render();
        });
    });

    $hazydays.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.hazyDays().render();
        });
    });

    $hermajesty.on('click', function(e) {
        Caman('#canvas', img, function() {
            this.herMajesty().render();
        });
    });

})
</script>